{{- $codeblock := transform.Highlight .Inner .Type  -}}


{{- $toolbar := printf
`<div class="chroma open">
    <div class="code-header language-%v">
        <div class="ibakuman-toolbar">
            <span class="ibakuman-toolbar__toggle-open">
                <i class="arrow fas fa-chevron-left fa-fw" aria-hidden="true"></i>
            </span>
            <span class="ibakuman-toolbar__ellipses">
                <i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i>
            </span>
            <span class="ibakuman-toolbar__copy">
                <i class="far fa-copy fa-fw" aria-hidden="true"></i>
            </span>
        </div>
    </div>
    <div class="table-wrapper">
        $1
    </div>
</div>` .Type -}}

{{- /* {{ $result := replaceRE `<div class="chroma">([\s\S]*)</div>` "Hello" $codeblock  }} */ -}}
{{- /* Same function as the commented code above */ -}}
{{- $result := replaceRE `(?s:<div class="chroma">(.*)</div>)` $toolbar $codeblock  -}}

{{- /* {{- warnf "warn msg: %+v" $result -}} */ -}}
{{- $result | safeHTML -}}
